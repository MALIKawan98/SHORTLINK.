<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üî• Pro Shortlink Generator üî•</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
* {box-sizing:border-box;margin:0;padding:0;}
body {font-family:'Poppins',sans-serif; background:linear-gradient(135deg,#0f0f0f,#1a1a1a); color:#fff; min-height:100vh; display:flex; justify-content:center; align-items:center;}
.container {width:95%; max-width:800px; background:rgba(0,0,0,0.5); backdrop-filter:blur(15px); padding:40px 30px; border-radius:20px; box-shadow:0 0 30px rgba(255,0,0,0.5); text-align:center;}
header h1 {font-size:2.8rem; margin-bottom:10px; color:#ff2e2e; text-shadow:0 0 15px #ff2e2e;}
header p {color:#ccc; font-size:1.1rem; margin-bottom:30px;}
form {margin-bottom:30px;}
input[type="url"], input[type="text"], input[type="password"], select {width:100%; padding:15px 20px; border-radius:12px; border:none; margin-bottom:20px; font-size:1rem; backdrop-filter:blur(10px); background:rgba(255,255,255,0.05); color:#fff; transition:0.3s;}
input:focus, select:focus {outline:none; box-shadow:0 0 10px #ff2e2e;}
button {padding:15px 35px; font-size:1.1rem; font-weight:700; border:none; border-radius:50px; cursor:pointer; background:linear-gradient(45deg,#ff2e2e,#ff5959); color:#fff; text-transform:uppercase; letter-spacing:1px; margin-top:10px; transition:0.3s; box-shadow:0 0 20px rgba(255,46,46,0.6);}
button:hover {transform:translateY(-3px); box-shadow:0 0 30px rgba(255,46,46,1);}
.result-section {display:none; margin-top:20px;}
.result-section input[type="text"] {flex-grow:1; background:rgba(255,255,255,0.1); border-radius:12px; padding:15px; color:#fff; border:none;}
.copy-container {display:flex; gap:10px;}
#historySection {margin-top:40px; background:rgba(255,255,255,0.05); padding:20px; border-radius:15px; display:none;}
.history-item {display:flex; justify-content:space-between; align-items:center; margin-bottom:12px; padding:10px 15px; background:rgba(255,255,255,0.08); border-radius:10px;}
.history-item span {font-size:0.95rem;}
.history-item button {padding:8px 15px; font-size:0.85rem; border-radius:30px; box-shadow:0 0 10px rgba(255,46,46,0.5);}
@media(max-width:768px){header h1 {font-size:2rem;} input[type="url"], input[type="text"], input[type="password"], select {font-size:0.95rem;} button {font-size:1rem; padding:12px 25px;}}
</style>
</head>
<body>
<div class="container">
<header>
<h1>‚ú® Pro Shortlink Generator ‚ú®</h1>
<p>Generate stylish shortlinks with password, steps & analytics!</p>
</header>

<form id="shortlinkForm">
<input type="url" id="longUrlInput" placeholder="Enter your long URL" required>
<input type="text" id="linkName" placeholder="Enter Link Name (mandatory)" required>
<input type="password" id="linkPassword" placeholder="Set a password (optional)">
<label>Select number of steps (1-5):</label>
<select id="linkSteps">
<option value="1">1 Step</option>
<option value="2">2 Steps</option>
<option value="3">3 Steps</option>
<option value="4">4 Steps</option>
<option value="5">5 Steps</option>
</select>
<label>Select number of ads (1-5):</label>
<select id="linkAds">
<option value="1">1 Ad</option>
<option value="2">2 Ads</option>
<option value="3">3 Ads</option>
<option value="4">4 Ads</option>
<option value="5">5 Ads</option>
</select>
<button type="submit">Generate Shortlink üöÄ</button>
</form>

<div class="result-section" id="resultSection">
<h2>Your Shortlink:</h2>
<div class="copy-container">
<input type="text" id="shortlinkResult" readonly placeholder="Your shortlink will appear here">
<button id="copyToClipboardBtn">Copy</button>
</div>
</div>

<button id="viewHistoryBtn">üìä View Your History</button>
<div id="historySection"></div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
<script>
const firebaseConfig = {
  apiKey: "AIzaSyBK_SUT3RkoPJMOa4VKdwYy3XPlT9cnKdQ",
  authDomain: "my-online-store-86803.firebaseapp.com",
  databaseURL: "https://my-online-store-86803-default-rtdb.firebaseio.com",
  projectId: "my-online-store-86803",
  storageBucket: "my-online-store-86803.firebasestorage.app",
  messagingSenderId: "1022781003029",
  appId: "1:1022781003029:web:ce8b76a51df502a1e4c51c",
  measurementId: "G-FTD87L79X0"
};
firebase.initializeApp(firebaseConfig);
const db=firebase.database();

const form=document.getElementById("shortlinkForm");
const longUrlInput=document.getElementById("longUrlInput");
const linkNameInput=document.getElementById("linkName");
const linkPasswordInput=document.getElementById("linkPassword");
const linkStepsSelect=document.getElementById("linkSteps");
const linkAdsSelect=document.getElementById("linkAds");
const resultSection=document.getElementById("resultSection");
const shortlinkResultInput=document.getElementById("shortlinkResult");
const copyBtn=document.getElementById("copyToClipboardBtn");
const viewHistoryBtn=document.getElementById("viewHistoryBtn");
const historySection=document.getElementById("historySection");

form.addEventListener("submit",(e)=>{
    e.preventDefault();
    const longUrl=longUrlInput.value.trim();
    const linkName=linkNameInput.value.trim();
    const password=linkPasswordInput.value.trim();
    const steps=linkStepsSelect.value;
    const ads=linkAdsSelect.value;
    if(!longUrl||!linkName){alert("Please enter URL and Name");return;}
    const shortId=Date.now().toString(36)+Math.random().toString(36).substr(2,5);
    const shortLink=`redirecting.html?url=${encodeURIComponent(longUrl)}&id=${shortId}`;
    const userId="user1";
    db.ref('users/'+userId+'/links/'+shortId).set({
        url:longUrl,
        name:linkName,
        password:password,
        steps:steps,
        ads:ads,
        timestamp:Date.now(),
        clicks:0,
        completedSteps:0
    });
    shortlinkResultInput.value=shortLink;
    resultSection.style.display="block";
});

copyBtn.addEventListener("click",()=>{
    navigator.clipboard.writeText(shortlinkResultInput.value).then(()=>{
        copyBtn.textContent="Copied!";
        setTimeout(()=>{copyBtn.textContent="Copy";},2000);
    });
});

viewHistoryBtn.addEventListener("click",()=>{
    historySection.innerHTML="";
    const userId="user1";
    db.ref('users/'+userId+'/links').once('value').then(snapshot=>{
        const links=snapshot.val();
        if(!links){historySection.innerHTML="<p>No history found.</p>";return;}
        for(let key in links){
            const l=links[key];
            const div=document.createElement("div");
            div.className="history-item";
            div.innerHTML=`<span>üìù ${l.name} | Steps: ${l.steps} | Ads: ${l.ads} | Clicks: ${l.clicks}</span>
            <button onclick="navigator.clipboard.writeText('redirecting.html?url=${encodeURIComponent(l.url)}&id=${key}').then(()=>alert('Link Copied!'))">Copy Link</button>`;
            historySection.appendChild(div);
        }
        historySection.style.display="block";
        historySection.scrollIntoView({behavior:"smooth"});
    });
});
</script>
</body>
    </html>
